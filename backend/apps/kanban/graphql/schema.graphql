# Ariadne GraphQL Schema for Kanban Board
# Schema-first approach - this SDL file is the source of truth

scalar DateTime

# --- Enums matching Django TextChoices ---

enum TaskStatusEnum {
  TODO
  DOING
  WAITING
  DONE
}

enum TaskPriorityEnum {
  P1
  P2
  P3
  P4
}

# --- Core Types ---

type TaskType {
  id: ID!
  title: String!
  description: String!
  status: TaskStatusEnum!
  category: String!
  priority: TaskPriorityEnum!
  createdAt: DateTime!
  updatedAt: DateTime!
}

# --- Query ---

type Query {
  allTasks: [TaskType!]!
}

# --- Mutation Payloads ---

type TaskError {
  field: String
  message: String!
}

type CreateTaskPayload {
  task: TaskType
  errors: [TaskError!]
}

type UpdateTaskPayload {
  task: TaskType
  errors: [TaskError!]
}

type DeleteTaskPayload {
  success: Boolean
  errors: [TaskError!]
}

# --- Mutations ---

type Mutation {
  createTask(
    title: String!
    status: TaskStatusEnum
    category: String
    priority: TaskPriorityEnum
  ): CreateTaskPayload

  updateTask(
    id: ID!
    title: String
    description: String
    status: TaskStatusEnum
    category: String
    priority: TaskPriorityEnum
  ): UpdateTaskPayload

  deleteTask(id: ID!): DeleteTaskPayload
}
